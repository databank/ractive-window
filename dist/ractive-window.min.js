!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@awspilot/ractive-dynamodb-ui",[],e):"object"==typeof exports?exports["@awspilot/ractive-dynamodb-ui"]=e():t["@awspilot/ractive-dynamodb-ui"]=e()}(this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i;i=Ractive.extend({template:"\n\t\t\t\t{{#_wnd_rendered}}\n\t\t\t\t\t<div\n\t\t\t\t\t\tid='ractive-window-{{.id}}'\n\t\t\t\t\t\tclass='ractive-window{{#(.buttons.length > 0)}} with-buttons{{/}}{{#.resizable}} resizable{{else}} fixed{{/}}{{#.geometry.state === 2}} maximized{{/}}{{#.class.window}} {{.class.window}}{{/}}{{#.topmost}} topmost{{/}}'\n\t\t\t\t\t\ton-click='_raise'\n\t\t\t\t\t\tstyle='{{#.hidden}}display: none;{{/}}top: {{.geometry.top}}px; left: {{.geometry.left}}px; {{#(.resizable || .geometry.state === 2)}}width: {{.geometry.width}}{{.geometry.dwunit}}; height: {{.geometry.height}}{{.geometry.dhunit}}; {{/}}z-index: {{.geometry.index}};{{#.style.window}} {{.style.window}}{{/}}'\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class='rw-modal' on-mousedown='_moveStart' style='{{^.blocked}}display: none;{{/}}'></div>\n\t\t\t\t\t\t<div class='rw-interior'>\n\t\t\t\t\t\t\t<div class='rw-controls'>{{>controls}}</div>\n\t\t\t\t\t\t\t<div class='rw-title' on-touchstart-mousedown='_moveStart' on-dblclick='_restore'>{{>title}}</div>\n\t\t\t\t\t\t\t{{#if dialog}}<div class='rw-dialog-cover'></div><div class='rw-dialog' style='width: {{dialog.width}}px; {{#if dialog.height}}height: {{dialog.height}}px; {{/if}}'>{{> ~/makePartial('sharedialog', dialog.raw) }}</div>{{/if}}\n\t\t\t\t\t\t\t<div class='rw-body{{#.class.body}} {{.class.body}}{{/}}' {{#.style.body}}style='{{.style.body}}'{{/}}>{{>body}}</div>\n\t\t\t\t\t\t\t{{#(.buttons.length > 0)}}<div class='rw-buttons'>{{>buttons}}</div>{{/}}\n\t\t\t\t\t\t\t<div class='rw-resize-handle' on-touchstart-mousedown='_resizeStart'></div>\n\t\t\t\t\t\t\t<div class='rw-foot'>{{>foot}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{{/}}\n\t\t\t",prompt:function(t,e){this.dialog({content:t,raw:"{{dialog.content}}<br><input class='form-control' value='{{dialog.reply}}' /> <div style='position: absolute;bottom: 10px;right: 10px;'><a class='btn btn-xs btn-default' on-click='@this.set(\"dialog\", false )'>Cancel</a> <a class='btn btn-xs btn-primary' on-click='dialog.callback.prompt:{{dialog}}'>OK</a></div>",width:300,cb:e})},confirm:function(t,e){this.dialog({content:t,raw:"{{dialog.content}} <div style='position: absolute;bottom: 10px;right: 10px;'><a class='btn btn-xs btn-default' on-click='@this.set(\"dialog\", false )'>Cancel</a> <a class='btn btn-xs btn-primary' on-click='dialog.callback.ok:{{dialog}}'>OK</a></div>",width:300,cb:e})},dialog:function(t){this.set("dialog",{content:t.content,params:t.params,raw:t.raw,width:t.width,height:t.height,cb:t.cb})},onconstruct:function(t){var e,n,i,o,r=this;i=function(t){var o,s;t.preventDefault(),t.type.indexOf("touch")>=0?(o=+t.changedTouches[0].clientX,s=+t.changedTouches[0].clientY):(o=+(t.x||t.clientX),s=+(t.y||t.clientY)),r.move(+r.get("geometry.left")+o-+e,+r.get("geometry.top")+s-+n),e=o,n=s,"mouseup"!==t.type&&"touchend"!==t.type||(document.removeEventListener("mousemove",i,!1),document.removeEventListener("mouseup",i,!1),document.removeEventListener("touchmove",i,!1),document.removeEventListener("touchend",i,!1))},r.on("_moveStart",(function(t){("mousedown"===t.original.type&&0===t.original.button||"touchstart"===t.original.type)&&(r.restore(),t.original.type.indexOf("touch")>=0?(e=+t.original.changedTouches[0].clientX,n=+t.original.changedTouches[0].clientY):(e=+(t.original.x||t.original.clientX),n=+(t.original.y||t.original.clientY)),document.addEventListener("mousemove",i),document.addEventListener("mouseup",i),document.addEventListener("touchmove",i),document.addEventListener("touchend",i),t.original.preventDefault()),r.element&&r.element.getElementsByTagName("iframe").length&&r.element.getElementsByTagName("iframe")[0].focus()})),o=function(t){var i,s;t.preventDefault(),t.type.indexOf("touch")>=0?(i=t.changedTouches[0].clientX,s=t.changedTouches[0].clientY):(i=+(t.x||t.clientX),s=+(t.y||t.clientY));var a=+r.get("geometry.width")+(i-+e),l=+r.get("geometry.height")+(s-+n);r.resize(a,l),e=i,n=s,"mouseup"!==t.type&&"touchend"!==t.type||(document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",o,!1),document.removeEventListener("touchmove",o,!1),document.removeEventListener("touchend",o,!1))},r.on("_resizeStart",(function(t){("mousedown"==t.original.type&&0===t.original.button||"touchstart"===t.original.type)&&(r.restore(),t.original.type.indexOf("touch")>=0?(e=t.original.changedTouches[0].clientX,n=t.original.changedTouches[0].clientY):(e=t.original.x||t.original.clientX,n=t.original.y||t.original.clientY),document.addEventListener("mousemove",o),document.addEventListener("mouseup",o),document.addEventListener("touchmove",o),document.addEventListener("touchend",o))}));var s=function(t,e){switch(t){case"min":r.minimize();break;case"max":r.maximize();break;case"normal":r.restore()}};r.on("dialog.callback.ok",(function(t,e){this.set("dialog",!1);try{e.cb()}catch(t){}})),r.on("dialog.callback.prompt",(function(t,e){try{e.cb(e.reply)}catch(t){}this.set("dialog",!1)})),r.on("_minimize",(function(t){s("min")})),r.on("_restore",(function(t){switch(r.get("geometry.state")){case 0:s("max");break;case 1:case 2:s("normal")}})),r.on("_raise",(function(t){r.raise()})),r.on("_close",(function(t){r.close()})),r.on("_dialog-button",(function(t){var e=t.context.action;e&&"function"==typeof e&&e.call(this)})),r.result=null,r.waitForClose=r.afterClose=new Promise((function(t,e){var n=function(t){return function(e){r.completeAfterClose=null,r.rejectAfterClose=null,t(e)}};r.completeAfterClose=n(t),r.rejectAfterClose=n(e)}))},onrender:function(){var t=this;!this.get("buttonClass")&&this.parent.get("buttonClass")&&this.set("buttonClass",this.parent.get("buttonClass")),this.watchers=this.observe({title:function(e,n){t.fire("retitle",e,t)},"geometry.state":function(e,n){switch(e){case 0:t.fire("restore",e,t);break;case 1:t.fire("minimize",e,t);break;case 2:t.fire("maximize",e,t)}}})},onunrender:function(){this.watchers&&"function"==typeof this.watchers.cancel&&this.watchers.cancel()},activated:function(){},data:function(){return{dialog:!1,_wnd_rendered:!1,blocked:!1,resizable:!0,geometry:{top:-9999,left:-9999,width:200,height:200,state:0,dwunit:"px",dhunit:"px",index:1e3,minimum:{x:0,y:0,width:70,height:50}},style:{},class:{},makePartial:function(t,e){return this._makePartial_templates||(this._makePartial_templates={}),this._makePartial_templates[t]!=e&&(this.resetPartial(t,e),this._makePartial_templates[t]=e),t}}},partials:{title:"{{> ~/makePartial('titleTpl', .title) }}",body:"",foot:"",buttons:"{{#.buttons:i}}<button on-click='_dialog-button' class='{{.position || ''}}{{#.buttonClass}} {{.buttonClass}}{{/}}{{#../../class.button}} {{../../class.button}}{{/}}' disabled='{{!.enabled}}'>{{> ~/makePartial('button' + i + 'Tpl', .label) }}</button>{{/}}",controls:"{{#controls:i}}\t{{#if .raw}}{{>  ~/makePartial('custom_control_template'+i, .raw) }}{{/if}}{{/controls}}{{#if minimizable === false}}{{else}}{{>minimizeControl}}{{/if}}{{>restoreControl}}{{>closeControl}}",minimizeControl:"<button on-click='_minimize' class='btn btn-sm rw-minimize'><i class='zmdi zmdi-window-minimize'></button>",restoreControl:"<button on-click='_restore'  class='btn btn-sm rw-restore'><i class='zmdi zmdi-window-restore'></button>",closeControl:"<button on-click='_close'    class='btn btn-sm rw-close'><i class='zmdi zmdi-close'></i></button>"},rerender:function(){return this.get("_wnd_rendered")?(this.set("_wnd_rendered",!1),this.set("_wnd_rendered",!0)):Promise.resolve("ok")},title:function(t){this.set("title",t)},move:function(t,e){if("string"==typeof t){switch(t){case"center":case"centerScreen":return this.set({"geometry.top":(this.parent.el.clientHeight-this.element.clientHeight)/2,"geometry.left":(this.parent.el.clientWidth-this.element.clientWidth)/2});case"cascade":return this.set({"geometry.top":this.parentNumber%10*20+10,"geometry.left":this.parentNumber%50*20+10})}return Promise.resolve(!1)}e=+e,t=+t;var n=this.get("geometry.minimum"),i=this.get("geometry.maximum"),o=+this.get("geometry.width"),r=+this.get("geometry.height");return i&&(t+o>+i.x&&(t=+i.x-t),e+r>+i.y&&(e=+i.y-e)),n&&(t<+n.x&&(t=+n.x),e<+n.y&&(e=+n.y)),this.set({"geometry.top":e,"geometry.left":t})},resize:function(t,e){t=r.call(this,"width",t),e=r.call(this,"height",e);var n=this.get("geometry.minimum"),i=this.get("geometry.maximum");i&&(t>i.width&&(t=i.width),t>i.height&&(t=i.height)),n&&(t<n.width&&(t=n.width),e<n.height&&(e=n.height)),this.set({"geometry.width":t,"geometry.height":e}),this.element&&this.element.getElementsByTagName("iframe").length&&this.element.getElementsByTagName("iframe")[0].focus()},resizable:function(t){this.set("resizable",t)},minimize:function(){1!==this.get("geometry.state")&&(this.set({hidden:!0,"geometry.state":1}),this.fire("minimized",{window:this}))},maximize:function(){2!==this.get("geometry.state")&&(this.normalGeometry={top:this.get("geometry.top"),left:this.get("geometry.left"),width:this.get("geometry.width"),height:this.get("geometry.height")},this.set({hidden:!1,"geometry.left":0,"geometry.top":0,"geometry.width":100,"geometry.height":100,"geometry.dwunit":"%","geometry.dhunit":"%","geometry.state":2}),this.fire("maximized",{window:this}))},restore:function(){switch(this.get("geometry.state")){case 1:this.set({hidden:!1,"geometry.state":0});break;case 2:var t=this.normalGeometry||{};this.normalGeometry=null,(t.top<0||t.left<0)&&(t.top=0,t.left=0),this.set({hidden:!1,"geometry.left":t.left,"geometry.top":t.top,"geometry.width":t.width,"geometry.height":t.height,"geometry.dwunit":"px","geometry.dhunit":"px","geometry.state":0})}this.raise()},raise:function(){this.parent&&this.parent.raiseWindow(this)},kill:function(){this.fire("close",this),this.parent?this.parent.killWindow(this):this.teardown(),this.completeAfterClose&&this.completeAfterClose(this.result)},content:function(t){return this.resetPartial("body",t)},buttons:function(){var t,e=[];if(this.set("buttons",e),1===arguments.length&&"number"==typeof arguments[0].length)e=arguments[0];else for(t=0;t<arguments.length;t++)e.push(arguments[t]);var n=[],i=[],o=[];for(t=0;t<e.length;t++){var r=e[t];r.position?"left"===r.position?n.push(r):"right"===r.position?i.push(r):"middle"===r.position?o.push(r):"center"===r.position?o.push(r):(i.push(r),r.position="right"):(i.push(r),r.position="right"),r.hasOwnProperty("enabled")||(r.enabled=!0)}for(e=[],t=0;t<n.length;t++)e.push(n[t]);for(t=i.length-1;t>=0;t--)e.push(i[t]);for(t=0;t<o.length;t++)e.push(o[t]);this.set("buttons",e)},button:function(t,e){var n,i,o=this.get("buttons");if("number"==typeof t)n=o[t],i=t;else for(i=0;i<o.length;i++)if(o[i].label===t){n=o[i];break}n&&(e(n),this.set("buttons."+i,n))},controls:function(){var t,e=[],n="";if(1===arguments.length&&"string"!=typeof arguments[0])e=arguments[0];else for(t=0;t<arguments.length;t++)e.push(arguments[t]);for(t=0;t<e.length;t++)n+="{{>"+e[t]+"Control}}";return this.partials.controls=n,this.rerender()},onClose:function(){this.kill()},close:function(t){if(t||(t=this.onClose),0===t.length)t.call(this);else{var e=this;t.call(this,(function(t){t&&e.kill()}))}}});var o=/([\d\.]+)(.*)/;function r(t,e){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,i=[],o=t[Symbol.iterator]();!(n=o.next()).done&&(i.push(n.value),!e||i.length!==e););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")}(o.exec(e.toString()),3),i=(n[0],n[1]),r=n[2];r=r||"px";var s="width"===t?"dwunit":"dhunit",a=this.find("div");if("px"===r)return i;if(a){var l={};l["geometry."+t]=i,l["geometry."+s]=r,this.set(l);var c=this.find("div")["client"+t[0].toUpperCase()+t.substring(1)];return l["geometry."+t]=c,l["geometry."+s]="px",this.set(l),c}}var s,a,l={ok:{label:"OK",action:function(){this.result="ok",this.close()},position:"middle"},cancel:{label:"Cancel",action:function(){this.result="cancel",this.close()},position:"middle"},yes:{label:"Yes",action:function(){this.result="yes",this.close()},position:"middle"},no:{label:"No",action:function(){this.result="no",this.close()},position:"middle"}};a=0,s=Ractive.extend({isolated:!0,defaults:{control:{label:function(t,e){i.partials[t+"ControlLabel"]=e}},controls:function(){for(var t="",e=0;e<arguments.length;e++)t+="{{>"+arguments[e]+"Control}}";i.partials.controls=t}},components:{Window:i},data:{windowSlots:[],windows:{},blocks:{},globalBlock:null},computed:{blocked:function(){return!!this.get("globalBlock")}},template:"<div class='ractive-window-host-modal' style='{{^blocked}}display: none;{{/blocked}}'></div><div class='host-content'>{{yield}}</div>{{#windowSlots}}<Window/>{{/windowSlots}}",newWindow:function(t,e){var n=a;a+=1;var i=this;return i.push("windowSlots",n).then((function(){var o,r=i.findAllComponents("Window"),s=r[r.length-1];i.set("windows."+n,s),s.parentNumber=n,s.set({"geometry.index":1e3+r.length,"geometry.left":-9999,"geometry.top":-9999,id:n});var a=function(){var t;return s.raise(),s.set("_wnd_rendered",!0).then((function(){s.element=s.find(".ractive-window");try{if((t=s.activated())&&"function"==typeof t.then)return t}catch(t){console.log(t)}}))},l=function(){return-9999===s.get("geometry.left")?s.move("cascade").then((function(){return s})):s};return o=(o=(o=function(){var n;if(e&&"function"==typeof e)try{if((n=e(s))&&"function"==typeof n.then)return n}catch(t){console.log(t)}else if("function"==typeof t)try{(n=t(s))&&"function"==typeof n.then&&(o=n)}catch(t){console.log(t)}}())?o.then(a):a())?o.then(l):l()}))},killWindow:function(t){var e,n,i=this.get("blocks"),o=this.get("windows"),r=-1;if(o){for(var s in o)o[s]===t?delete o[s]:(n=o[s].get("geometry.index"))>r&&(r=n,e=o[s]);e&&!e.get("topmost")&&(e.set("topmost",!0),e.element&&e.element.getElementsByTagName("iframe").length&&e.element.getElementsByTagName("iframe")[0].focus())}var a=this.get("windowSlots");for(n in a&&this.splice("windowSlots",a.indexOf(t.parentNumber),1),i){var l=i[n];l&&Array.isArray(l)&&l.indexOf(t.parentNumber)>=0&&l.splice(l.indexOf(t.parentNumber),1)}t===this.get("globalBlock")&&this.set("globalBlock",null),this.unblockUnblockedWindows()},raiseWindow:function(t){var e,n=this.get("windows"),i=this.get("windowSlots"),o=this.get("blocks"),r=[],s=this.topLevelBlockers(t);for(var a in s.push(t),n)s.indexOf(n[a])<0&&r.push(n[a]);function l(t,e){for(var i in e){var s=n[e[i]],a=r.indexOf(t),c=r.indexOf(s);if(!(!s||a<0||c<0)){var d=o[s.parentNumber];!d&&Array.isArray(d)&&d.length>0&&l(s,d),a>c&&(r.splice(a,1),r.splice(c,0,t))}}}for(e in r.sort((function(t,e){var n=t.get("geometry.index"),i=e.get("geometry.index");return n<i?-1:n>i?1:0})),t&&(r=r.concat(s)),i){var c=o[i[e]];c&&Array.isArray(c)&&c.length>0&&l(n[i[e]],c)}for(e in r)r[e].set("geometry.index",+e+1e3),r[e]!==t&&r[e].set("topmost",!1);t.get("topmost")||(t.set("topmost",!0),setTimeout((function(){t.element&&t.element.getElementsByTagName("iframe").length&&t.element.getElementsByTagName("iframe")[0].focus()}),300));var d=function t(e){var i=[];if(!e)return i;var r=o[e.parentNumber];if(r&&Array.isArray(r)&&r.length>0)for(var s in r)i=i.concat(t(n[r[s]]));return i.push(e),i}(this.get("globalBlock"));for(e in d)d[e].add("geometry.index",1e4)},topLevelBlockers:function(t){if(!t)return[];var e=this.get("blocks"),n=this.get("windows"),i=e[t.parentNumber],o=[];if(!i||!Array.isArray(i)||0===i.length)return o;for(var r in i){var s=e[i[r]];s&&Array.isArray(s)&&0!==s.length?o=o.concat(this.topLevelBlockers(n[i[r]])):o.push(n[i[r]])}return o},blockWindow:function(t,e){if(t&&e){var n=this.get("blocks"),i=n[t.parentNumber];i&&Array.isArray(i)||(i=[]),i.indexOf(e.parentNumber)<0&&i.push(e.parentNumber),n[t.parentNumber]=i;for(var o=2;o<arguments.length;o++)i.indexOf(arguments[o].parentNumber)<0&&i.push(arguments[o].parentNumber);i.length>0&&t.set("blocked",!0),this.raiseWindow()}},unblockWindow:function(t,e){if(!(!t|!e)){var n=this.get("blocks"),i=n[t.parentNumber];if(i&&Array.isArray(i)){i.indexOf(e.parentNumber)>=0&&i.splice(i.indexOf(e.parentNumber),1);for(var o=2;o<arguments.length;o++)i.indexOf(arguments[o].parentNumber)>=0&&i.splice(i.indexOf(arguments[o].parentNumber),1);0===i.length&&t.set("blocked",!1),this.raiseWindow()}}},unblockUnblockedWindows:function(){var t=this.get("blocks"),e=this.get("windows");for(var n in t){var i=t[n];if(!i||!Array.isArray(i)||0===i.length){var o=e[n];o&&o.set("blocked",!1)}}},messageBox:function(t){var e=arguments,n=this;return new Promise((function(i){n.newWindow((function(o){var r;e.length>=2?(r=e[0],t=e[1]):1===e.length&&"string"==typeof e[0]&&(r=e[0],t={}),o.set("title",t.title||"Message"),o.set("resizable",!1),o.controls("close"),o.content(r);for(var s=t.buttons||["ok"],a=[],c=0;c<s.length;c++)l.hasOwnProperty(s[c])&&a.push(l[s[c]]);o.buttons(a),o.onClose=function(){this.kill(),i(o.result||"none")},t.hasOwnProperty("modal")&&!t.modal||n.set("globalBlock",o),o.activated=function(){o.move("center")}}))}))}});var c={Window:i,WindowHost:s};e.default=c}]).default}));